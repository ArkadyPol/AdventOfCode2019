<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
  </head>
  <body>
    <script>
      const data = [
        3,
        8,
        1001,
        8,
        10,
        8,
        105,
        1,
        0,
        0,
        21,
        34,
        51,
        64,
        81,
        102,
        183,
        264,
        345,
        426,
        99999,
        3,
        9,
        102,
        2,
        9,
        9,
        1001,
        9,
        4,
        9,
        4,
        9,
        99,
        3,
        9,
        101,
        4,
        9,
        9,
        102,
        5,
        9,
        9,
        1001,
        9,
        2,
        9,
        4,
        9,
        99,
        3,
        9,
        101,
        3,
        9,
        9,
        1002,
        9,
        5,
        9,
        4,
        9,
        99,
        3,
        9,
        102,
        3,
        9,
        9,
        101,
        3,
        9,
        9,
        1002,
        9,
        4,
        9,
        4,
        9,
        99,
        3,
        9,
        1002,
        9,
        3,
        9,
        1001,
        9,
        5,
        9,
        1002,
        9,
        5,
        9,
        101,
        3,
        9,
        9,
        4,
        9,
        99,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        101,
        1,
        9,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        1,
        9,
        4,
        9,
        3,
        9,
        101,
        1,
        9,
        9,
        4,
        9,
        3,
        9,
        101,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        101,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        99,
        3,
        9,
        101,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        1,
        9,
        4,
        9,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        1,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        101,
        1,
        9,
        9,
        4,
        9,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        101,
        1,
        9,
        9,
        4,
        9,
        99,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        101,
        1,
        9,
        9,
        4,
        9,
        3,
        9,
        101,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        101,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        1,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        99,
        3,
        9,
        1001,
        9,
        1,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        101,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        101,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        1,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        1,
        9,
        4,
        9,
        99,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        101,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        1,
        9,
        4,
        9,
        3,
        9,
        1002,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        1001,
        9,
        2,
        9,
        4,
        9,
        3,
        9,
        102,
        2,
        9,
        9,
        4,
        9,
        3,
        9,
        101,
        1,
        9,
        9,
        4,
        9,
        99
      ];
      let arr = [5, 6, 7, 8, 9];
      let result = combinate(arr);
      let values = [];
      for (let inputs of result) {
        values.push(runOpcode(inputs));
      }
      console.log(Math.max(...values));
      function opcode(data, input1, input2, index) {
        let data2 = [].concat(data);
        let firstInput = input1 !== undefined;
        for (let i = index; i < data2.length; ) {
          let code = String(data2[i]);
          if (code.length < 2) code = "0" + code;
          let paramMode1 = +code.slice(-3, -2);
          let paramMode2 = +code.slice(-4, -3);
          let param1;
          let param2;
          code = code.slice(-2);
          switch (code) {
            case "01":
              param1 = paramMode1 ? data2[i + 1] : data2[data2[i + 1]];
              param2 = paramMode2 ? data2[i + 2] : data2[data2[i + 2]];
              data2[data2[i + 3]] = param1 + param2;
              i += 4;
              break;
            case "02":
              param1 = paramMode1 ? data2[i + 1] : data2[data2[i + 1]];
              param2 = paramMode2 ? data2[i + 2] : data2[data2[i + 2]];
              data2[data2[i + 3]] = param1 * param2;
              i += 4;
              break;
            case "03":
              if (firstInput) {
                data2[data2[i + 1]] = input1;
              } else {
                data2[data2[i + 1]] = input2;
              }
              i += 2;
              firstInput = false;
              break;
            case "04":
              param1 = paramMode1 ? data2[i + 1] : data2[data2[i + 1]];
              input2 = param1;
              i += 2;
              return [data2, input2, i];
            case "05":
              param1 = paramMode1 ? data2[i + 1] : data2[data2[i + 1]];
              param2 = paramMode2 ? data2[i + 2] : data2[data2[i + 2]];
              if (param1) i = param2;
              else i += 3;
              break;
            case "06":
              param1 = paramMode1 ? data2[i + 1] : data2[data2[i + 1]];
              param2 = paramMode2 ? data2[i + 2] : data2[data2[i + 2]];
              if (!param1) i = param2;
              else i += 3;
              break;
            case "07":
              param1 = paramMode1 ? data2[i + 1] : data2[data2[i + 1]];
              param2 = paramMode2 ? data2[i + 2] : data2[data2[i + 2]];
              data2[data2[i + 3]] = param1 < param2 ? 1 : 0;
              i += 4;
              break;
            case "08":
              param1 = paramMode1 ? data2[i + 1] : data2[data2[i + 1]];
              param2 = paramMode2 ? data2[i + 2] : data2[data2[i + 2]];
              data2[data2[i + 3]] = param1 == param2 ? 1 : 0;
              i += 4;
              break;
            case "99":
              return input2;
          }
        }
      }
      function runOpcode(inputs) {
        let input2 = 0;
        let datas = [data, data, data, data, data];
        let indexes = [0, 0, 0, 0, 0];
        for (let i = 0; ; i++) {
          result = opcode(datas[i % 5], inputs[i], input2, indexes[i % 5]);
          if (!Array.isArray(result)) break;
          [datas[i % 5], input2, indexes[i % 5]] = result;
        }
        return input2;
      }
      function combinate(arr) {
        if (arr.length == 1) return arr;
        if (arr.length == 2) {
          let arr1 = [].concat(...arr);
          arr1.reverse();
          return [arr, arr1];
        }
        let result = [];
        for (let i = 0; i < arr.length; i++) {
          let arr2 = [].concat(arr.slice(0, i), arr.slice(i + 1));
          let temp = combinate(arr2).map(x => [arr[i], ...x]);
          result.push(...temp);
        }
        return result;
      }
    </script>
  </body>
</html>
